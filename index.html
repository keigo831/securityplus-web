<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>Security+ SY0-701 é¡Œåº«</title>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans","Helvetica Neue",Arial,sans-serif;font-size:20px;line-height:1.6;padding:24px;max-width:900px;margin:auto;}
button{font-size:20px;padding:8px 16px;margin:4px;}
mark{background:yellow;}
#answer{color:#d32f2f;font-weight:bold;}
</style>
</head>
<body>
<h1>CompTIA Security+ (SY0-701) é¡Œåº«</h1>
<p>å…± <span id="total"></span> é¡Œã€‚å¯é»ã€Œé‡é»ã€æ¨™è¨»é¡Œç›®ï¼Œç³»çµ±æœƒè¨˜éŒ„æ–¼ç€è¦½å™¨ã€‚</p>
<hr>
<h2 id="qnum"></h2>
<div id="question_en"></div>
<div id="question_cn" style="color:#555;margin-bottom:16px;"></div>
<div id="options"></div>
<p><strong>âœ… æ­£ç¢ºç­”æ¡ˆï¼š</strong> <span id="answer"></span></p>
<p><strong>ğŸ”‘ é—œéµå­—ï¼š</strong> <span id="keywords"></span></p>
<p><strong>ğŸ“˜ è§£é¡Œèªªæ˜ï¼š</strong> <span id="explanation"></span></p>
<div style="margin-top:24px;">
  <button id="prev">ä¸Šä¸€é¡Œ</button>
  <button id="next">ä¸‹ä¸€é¡Œ</button>
  <button id="bookmark">æ¨™è¨»é‡é»</button>
  <button id="showbookmarks">æŸ¥çœ‹é‡é»</button>
</div>
<script>
let data=[], idx=0;
let bookmarks=JSON.parse(localStorage.getItem('bookmarkIds')||'[]');
const tCache={};
function translate(text){
  if(!text) return Promise.resolve('');
  if(tCache[text]) return Promise.resolve(tCache[text]);
  const url='https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=zh-TW&dt=t&q='+encodeURIComponent(text);
  return fetch(url).then(r=>r.json()).then(arr=>{
    const res=arr[0].map(x=>x[0]).join('');
    tCache[text]=res;return res;
  }).catch(()=> '');
}
fetch('questions.json').then(r=>r.json()).then(j=>{
  data=j;
  document.getElementById('total').textContent=data.length;
  load(0);
});
function load(i){
  idx=i;
  const q=data[i];
  document.getElementById('qnum').textContent='Question #'+q.id;
  document.getElementById('question_en').innerHTML=q.question_html;
  translate(q.question).then(txt=>document.getElementById('question_cn').textContent=txt);
  document.getElementById('options').innerHTML=q.options.map(o=>'<div>'+o+'</div>').join('');
  translate(q.correct_text).then(ans_cn=>{
    document.getElementById('answer').textContent=q.correct_letter+'. '+q.correct_text+' / '+ans_cn;
  });
  Promise.all(q.keywords.map(k=>translate(k))).then(arr=>{
    const combined=q.keywords.map((k,i)=>k+'ï¼ˆ'+arr[i]+'ï¼‰').join('ã€');
    document.getElementById('keywords').textContent=combined;
  });
  document.getElementById('explanation').textContent='å¾…è£œå……';
  document.getElementById('prev').disabled=(idx===0);
  document.getElementById('next').disabled=(idx===data.length-1);
  updateBmBtn();
  window.scrollTo({top:0,behavior:'smooth'});
}
function updateBmBtn(){
  const btn=document.getElementById('bookmark');
  if(bookmarks.includes(data[idx].id)){btn.textContent='å·²æ¨™è¨»';btn.style.background='#ffd54f';}
  else{btn.textContent='æ¨™è¨»é‡é»';btn.style.background='';}
}
document.getElementById('prev').onclick=()=>load(idx-1);
document.getElementById('next').onclick=()=>load(idx+1);
document.getElementById('bookmark').onclick=()=>{
  const id=data[idx].id;
  const i=bookmarks.indexOf(id);
  if(i>-1) bookmarks.splice(i,1);
  else bookmarks.push(id);
  localStorage.setItem('bookmarkIds',JSON.stringify(bookmarks));
  updateBmBtn();
};
document.getElementById('showbookmarks').onclick=()=>{
  if(bookmarks.length===0) alert('å°šæœªæ¨™è¨»ä»»ä½•é¡Œç›®');
  else alert('å·²æ¨™è¨»é¡Œè™Ÿï¼š'+bookmarks.join(', '));
};
</script>
</body>
</html>